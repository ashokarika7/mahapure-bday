/* home.styles.css
   Mobile-first responsive styles and keyframes for Home component.
   Place this file next to home.jsx and import it in the component.
*/

/* -------------------------
   CSS Custom Properties (CSS Variables)
   ------------------------- */

:root {
  --gift-size-mobile: clamp(120px, 40vmin, 200px);
  --gift-size-tablet: clamp(160px, 35vmin, 280px);
  --gift-size-desktop: clamp(200px, 30vmin, 380px);
  --gift-size-large: clamp(240px, 25vmin, 420px);
  
  --title-scale-mobile: 1;
  --title-scale-tablet: 1.1;
  --title-scale-desktop: 1.2;
  --title-scale-large: 1.3;
  
  --shadow-blur-mobile: 12px;
  --shadow-blur-tablet: 16px;
  --shadow-blur-desktop: 20px;
  --shadow-blur-large: 24px;
}

/* -------------------------
   Keyframes (mobile-first)
   ------------------------- */

/* subtle magic gradient shift - faster and smoother */
@keyframes magicGradient {
  0% { --g1: #2b1055; --g2: #3b0a59; --g3: #7b2cbf; }
  25% { --g1: #3b0a59; --g2: #7b2cbf; --g3: #f7d794; }
  50% { --g1: #7b2cbf; --g2: #f7d794; --g3: #2b1055; }
  75% { --g1: #f7d794; --g2: #2b1055; --g3: #3b0a59; }
  100% { --g1: #2b1055; --g2: #3b0a59; --g3: #7b2cbf; }
}

/* title pop-in */
@keyframes popIn {
  0% { opacity: 0; transform: scale(0.88); filter: blur(6px); }
  60% { opacity: 1; transform: scale(1.04); filter: blur(0); }
  100% { transform: scale(1); }
}

/* idle bounce (gentle) */
@keyframes giftBounce {
  0% { transform: translateY(0) scale(1); }
  40% { transform: translateY(-6px) scale(1.02); }
  70% { transform: translateY(-3px) scale(1.01); }
  100% { transform: translateY(0) scale(1); }
}

/* lid flip open (3D-like) */
@keyframes lidFlipOpen {
  0% { transform-origin: 50% 100%; transform: rotateX(0deg) translateY(0); }
  60% { transform-origin: 50% 100%; transform: rotateX(-100deg) translateY(-8px); }
  100% { transform-origin: 50% 100%; transform: rotateX(-110deg) translateY(-14px); }
}

/* confetti piece flight uses --dx, --dy, --r vars (set inline) */
@keyframes confettiFlight {
  0% { opacity: 1; transform: translateY(0) rotate(var(--r, 0deg)) scale(1); }
  100% { opacity: 0; transform: translateY(var(--dy, -200px)) translateX(var(--dx, 120px)) rotate(calc(var(--r, 0deg) + 720deg)) scale(0.9); }
}

/* -------------------------
   Root helpers & background
   ------------------------- */

.home-root { 
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

/* animated gradient background: mobile-first - faster and smoother */
.bg-animated-gradient {
  background: linear-gradient(135deg, var(--g1,#2b1055), var(--g2,#7b2cbf) 45%, var(--g3,#f7d794) 95%);
  animation: magicGradient 8s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  opacity: 0.98;
  will-change: background;
  background-attachment: fixed;
  transition: background 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Title styling: mobile-first with improved scaling */
.home-title { 
  animation: popIn 850ms cubic-bezier(.2,.9,.2,1) both; 
  text-shadow: 0 6px 22px rgba(99,21,133,0.15); 
  line-height: 1.1;
  transform: scale(var(--title-scale-mobile));
}

.text-gold { 
  color: #fde68a; 
  text-shadow: 0 2px 8px rgba(253, 230, 138, 0.3);
}

/* -------------------------
   Gift sizing (mobile-first)
   ------------------------- */

/* On mobile we want the gift to be large but not full-width.
   Use CSS variable --gift-size that scales with viewport via clamp().
   Default (mobile): smaller scale; larger breakpoints override via media queries. */
.gift-wrap { 
  --gift-size: var(--gift-size-mobile);
  width: var(--gift-size); 
  height: calc(var(--gift-size) * 0.92); 
  margin: 0 auto; 
  position: relative;
  min-height: 120px;
  min-width: 120px;
}

/* Shadow under the gift with smooth transitions */
.gift-shadow { 
  filter: blur(var(--shadow-blur-mobile)); 
  border-radius: 9999px; 
  background: rgba(0,0,0,0.28); 
  opacity: 0.6; 
  transition: opacity 300ms cubic-bezier(0.4, 0, 0.2, 1), 
              filter 300ms cubic-bezier(0.4, 0, 0.2, 1),
              transform 300ms cubic-bezier(0.4, 0, 0.2, 1); 
  position: absolute; 
  bottom: 0; 
  left: 50%; 
  transform: translateX(-50%); 
  width: 75%; 
  height: 0.9rem;
}

/* Box body (mobile-first) */
.box-body {
  width: 100%;
  height: 78%;
  border-radius: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  transform-style: preserve-3d;
  cursor: pointer;
  background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01)), linear-gradient(180deg,#4b1360,#6b2da5);
  box-shadow: 0 10px 28px rgba(11,6,23,0.45);
  position: relative;
  overflow: visible;
  transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1), 
              box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1),
              background 300ms cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 44px;
  min-width: 44px;
}

/* Touch and hover states with smooth color transitions */
.box-body:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 14px 32px rgba(11,6,23,0.55);
  background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02)), 
              linear-gradient(180deg,#5b1a70,#7b3db5);
}

.box-body:active {
  transform: translateY(0) scale(0.98);
  transition: transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005)), 
              linear-gradient(180deg,#3b0a50,#5b2a85);
}

.box-body:focus-visible {
  outline: 3px solid rgba(255,215,64,0.6);
  outline-offset: 4px;
}

/* Ribbons with smooth color transitions */
.ribbon-vertical {
  width: 22%;
  height: 100%;
  border-radius: 6px;
  background: linear-gradient(180deg, rgba(255,223,93,0.95), rgba(255,200,74,0.92));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.25);
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateZ(24px);
  transition: background 300ms cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.ribbon-horizontal {
  width: 88%;
  height: 18%;
  border-radius: 6px;
  background: linear-gradient(90deg, rgba(255,223,93,0.95), rgba(255,200,74,0.92));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
  position: absolute;
  left: 50%;
  transform: translateX(-50%) translateZ(26px);
  transition: background 300ms cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Ribbon hover effects */
.box-body:hover .ribbon-vertical {
  background: linear-gradient(180deg, rgba(255,235,120,0.98), rgba(255,215,90,0.95));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.35);
}

.box-body:hover .ribbon-horizontal {
  background: linear-gradient(90deg, rgba(255,235,120,0.98), rgba(255,215,90,0.95));
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.3);
}

/* Bow with smooth color transitions */
.bow { 
  display:flex; 
  align-items:center; 
  justify-content:center; 
  width:64%; 
  height:36px; 
  left:50%; 
  position:absolute; 
  transform:translateX(-50%); 
  top: -1.5rem; 
  pointer-events: none; 
}

.bow-loop { 
  width:46%; 
  height:36px; 
  border-radius:999px; 
  background: linear-gradient(180deg, rgba(255,230,150,1), rgba(240,185,80,1)); 
  box-shadow: 0 6px 20px rgba(0,0,0,0.25); 
  position: absolute; 
  top:0;
  transition: background 300ms cubic-bezier(0.4, 0, 0.2, 1),
              box-shadow 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

.bow-loop.left-loop { transform: translateX(-28%) rotate(-12deg); }
.bow-loop.right-loop { transform: translateX(28%) rotate(12deg); }

.bow-knot { 
  width:24px; 
  height:24px; 
  border-radius:6px; 
  background: linear-gradient(180deg,#b0751f,#ffd46b); 
  position:absolute; 
  top:5px;
  transition: background 300ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Bow hover effects */
.box-body:hover .bow-loop {
  background: linear-gradient(180deg, rgba(255,245,170,1), rgba(250,200,100,1));
  box-shadow: 0 8px 24px rgba(0,0,0,0.3);
}

.box-body:hover .bow-knot {
  background: linear-gradient(180deg,#c0852f,#ffd97b);
}


/* Idle bounce when not opening */
.gift-idle { animation: giftBounce 3000ms ease-in-out infinite; }

/* Lid: sits at top of box; uses transform-origin at bottom for flip */
.box-lid {
  width: 91%;
  height: 28%;
  background: linear-gradient(180deg,#7b3ac7,#3b0a59);
  border-radius: 12px;
  transform-origin: 50% 100%;
  box-shadow: 0 10px 32px rgba(11,6,23,0.42);
  left: 50%;
  position: absolute;
  transform: translateX(-50%);
  top: -2%;
  z-index: 30;
}

/* When body has .opening, animate the lid and dim the shadow */
.opening .box-lid { animation: lidFlipOpen 900ms cubic-bezier(.2,.9,.2,1) forwards; transform-style: preserve-3d; backface-visibility: hidden; }
.opening .gift-shadow { opacity: 0.28; transform: translateY(4px); }

/* Confetti container and pieces */
.confetti-container { overflow: visible; display:flex; align-items:center; justify-content:center; position:absolute; width:100%; height:100%; top:0; left:0; pointer-events:none; }

.confetti-piece { position:absolute; border-radius:3px; opacity:0; transform-origin:center; }

/* Toggle burst by adding 'confetti-burst' to the container element */
.confetti-burst .confetti-piece {
  animation-name: confettiFlight;
  animation-duration: 1200ms;
  animation-timing-function: cubic-bezier(.12,.7,.1,1);
  animation-fill-mode: forwards;
}

/* accessible focus for overlay button */
button[aria-label="Open gift"]:focus-visible { outline: 3px solid rgba(255,215,64,0.45); outline-offset: 6px; border-radius: 12px; }

/* -------------------------
   Responsive scaling (mobile-first -> larger screens)
   ------------------------- */

/* Extra small screens (320px+) */
@media (min-width: 320px) {
  .gift-wrap { --gift-size: var(--gift-size-mobile); }
  .home-title { transform: scale(var(--title-scale-mobile)); }
}

/* Small tablets and up (640px+) */
@media (min-width: 640px) {
  .gift-wrap { 
    --gift-size: var(--gift-size-tablet);
    min-height: 160px;
    min-width: 160px;
  }
  .home-title { 
    transform: scale(var(--title-scale-tablet));
  }
  .gift-shadow { 
    filter: blur(var(--shadow-blur-tablet)); 
    height: 1rem;
  }
  .bow-knot { width: 26px; height: 26px; top: 2px; }
  .box-lid { height: 30%; border-radius: 14px; }
  .box-body { 
    border-radius: 16px;
    box-shadow: 0 12px 32px rgba(11,6,23,0.5);
  }
}

/* Medium screens - desktop (1024px+) */
@media (min-width: 1024px) {
  .gift-wrap { 
    --gift-size: var(--gift-size-desktop);
    min-height: 200px;
    min-width: 200px;
  }
  .home-title { 
    transform: scale(var(--title-scale-desktop));
  }
  .gift-shadow { 
    filter: blur(var(--shadow-blur-desktop)); 
    height: 1.1rem;
  }
  .box-body { 
    height: 80%; 
    border-radius: 18px; 
    box-shadow: 0 18px 40px rgba(11,6,23,0.55);
  }
  .box-lid { 
    height: 32%; 
    border-radius: 16px; 
    box-shadow: 0 18px 44px rgba(11,6,23,0.55);
  }
  .bow { top: -2.4rem; }
}

/* Large screens (1400px+) */
@media (min-width: 1400px) {
  .gift-wrap { 
    --gift-size: var(--gift-size-large);
    min-height: 240px;
    min-width: 240px;
  }
  .home-title { 
    transform: scale(var(--title-scale-large));
  }
  .gift-shadow { 
    filter: blur(var(--shadow-blur-large)); 
    height: 1.2rem;
  }
}

/* Ultra-wide screens (1920px+) */
@media (min-width: 1920px) {
  .gift-wrap { 
    --gift-size: clamp(280px, 20vmin, 480px);
  }
  .home-title { 
    transform: scale(1.4);
  }
}

/* -------------------------
   Performance optimizations
   ------------------------- */

/* GPU acceleration for smooth animations */
.gift-wrap,
.box-body,
.box-lid,
.confetti-piece {
  will-change: transform;
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  .bg-animated-gradient {
    animation: none;
  }
  
  .home-title {
    animation: none;
  }
  
  .gift-idle {
    animation: none;
  }
  
  .confetti-burst .confetti-piece {
    animation: none;
  }
  
  .opening .box-lid {
    animation: none;
  }
}

/* -------------------------
   Accessibility improvements
   ------------------------- */

button[disabled] { 
  opacity: 0.95; 
  pointer-events: none; 
  cursor: not-allowed;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .box-body {
    border: 2px solid #ffffff;
  }
  
  .text-gold {
    color: #ffff00;
  }
  
  .home-title {
    text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
  }
}

/* Focus management for keyboard navigation */
.box-body:focus-visible,
button[aria-label="Open gift"]:focus-visible {
  outline: 3px solid rgba(255,215,64,0.8);
  outline-offset: 4px;
  border-radius: 12px;
}

/* Screen reader only text */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}
